import{_ as ge,T as he,e as me,s as w,V as H,r as be,f as k}from"./index-CsMwEyaY.js";import{_ as ye}from"./extends-CF3RwP-h.js";import{r as l}from"./index-BS1Ahyye.js";import{D as J}from"./index-DsB9b_Jd.js";var Se=[];function X(e){return Se[e-1]}var Ee=/^data:/;class d{static has(t){var r=d._entries,a=Ee.test(t);return a||!!r[t]}static add(t){var r=d._entries,a=Date.now();r[t]?(r[t].lastUsedTimestamp=a,r[t].refCount+=1):r[t]={lastUsedTimestamp:a,refCount:1}}static remove(t){var r=d._entries;r[t]&&(r[t].refCount-=1),d._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var t=d._entries,r=Object.keys(t);if(r.length+1>d._maximumEntries){var a,n;r.forEach(i=>{var u=t[i];(!n||u.lastUsedTimestamp<n.lastUsedTimestamp)&&u.refCount===0&&(a=i,n=u)}),a&&delete t[a]}}}d._maximumEntries=256;d._entries={};var M=0,I={},v={abort(e){var t=I[""+e];t&&(t.onerror=null,t.onload=null,t=null,delete I[""+e])},getSize(e,t,r){var a=!1,n=setInterval(u,16),i=v.load(e,u,g);function u(){var c=I[""+i];if(c){var o=c.naturalHeight,s=c.naturalWidth;o&&s&&(t(s,o),a=!0)}a&&(v.abort(i),clearInterval(n))}function g(){typeof r=="function"&&r(),v.abort(i),clearInterval(n)}},has(e){return d.has(e)},load(e,t,r){M+=1;var a=new window.Image;return a.onerror=r,a.onload=n=>{var i=()=>t({nativeEvent:n});typeof a.decode=="function"?a.decode().then(i,i):setTimeout(i,0)},a.src=e,I[""+M]=a,M},prefetch(e){return new Promise((t,r)=>{v.load(e,()=>{d.add(e),d.remove(e),t()},r)})},queryCache(e){var t={};return e.forEach(r=>{d.has(r)&&(t[r]="disk/memory")}),Promise.resolve(t)}};class p{static get(){return J.get("window").scale}static getFontScale(){return J.get("window").fontScale||p.get()}static getPixelSizeForLayoutSize(t){return Math.round(t*p.get())}static roundToNearestPixel(t){var r=p.get();return Math.round(t*r)/r}}var we=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],pe="ERRORED",O="LOADED",Q="LOADING",Le="IDLE",ze=0,xe=/^(data:image\/svg\+xml;utf8,)(.*)/;function ke(e,t){return e&&t!=null?l.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},l.createElement("defs",null,l.createElement("filter",{id:"tint-"+t,suppressHydrationWarning:!0},l.createElement("feFlood",{floodColor:""+e,key:e}),l.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function Ie(e,t,r,a){var n=w.flatten(e),i=n.filter,u=n.resizeMode,g=n.shadowOffset,c=n.tintColor;n.resizeMode,n.tintColor;var o=[],s=null;if(i&&o.push(i),t&&o.push("blur("+t+"px)"),g){var h=be(n);h&&o.push("drop-shadow("+h+")")}return(a||c)&&r!=null&&o.push("url(#tint-"+r+")"),o.length>0&&(s=o.join(" ")),[u,s,c]}function De(e){if(typeof e=="number"){var t=X(e),r=t.height,a=t.width;return{height:r,width:a}}else if(e!=null&&!Array.isArray(e)&&typeof e=="object"){var n=e.height,i=e.width;return{height:n,width:i}}}function A(e){var t=null;if(typeof e=="number"){var r=X(e);if(r==null)throw new Error('Image: asset with ID "'+e+'" could not be found. Please check the image source or packager.');var a=r.scales[0];if(r.scales.length>1){var n=p.get();a=r.scales.reduce((s,h)=>Math.abs(h-n)<Math.abs(s-n)?h:s)}var i=a!==1?"@"+a+"x":"";t=r?r.httpServerLocation+"/"+r.name+i+"."+r.type:""}else typeof e=="string"?t=e:e&&typeof e.uri=="string"&&(t=e.uri);if(t){var u=t.match(xe);if(u){var g=u[1],c=u[2],o=encodeURIComponent(c);return""+g+o}}return t}var Y=l.forwardRef((e,t)=>{var r=e["aria-label"],a=e.accessibilityLabel,n=e.blurRadius,i=e.defaultSource,u=e.draggable,g=e.onError,c=e.onLayout,o=e.onLoad,s=e.onLoadEnd,h=e.onLoadStart,Z=e.pointerEvents,D=e.source,T=e.style,K=ge(e,we),_=r||a,N=l.useState(()=>{var f=A(D);if(f!=null){var m=v.has(f);if(m)return O}return Le}),j=N[0],L=N[1],q=l.useState({}),F=q[0],ee=q[1],te=l.useContext(he),C=l.useRef(null),B=l.useRef(ze++),b=l.useRef(null),re=j===O||j===Q&&i==null,R=Ie(T,n,B.current,e.tintColor),ae=R[0],ne=R[1],ie=R[2],y=e.resizeMode||ae||"cover",oe=e.tintColor||ie,U=re?D:i,z=A(U),le=De(U),ue=z?'url("'+z+'")':null,V=de(),se=z?me("img",{alt:_||"",style:E.accessibilityImage$raw,draggable:u||!1,ref:C,src:z}):null;function de(){if(C.current!=null&&(y==="center"||y==="repeat")){var f=C.current,m=f.naturalHeight,S=f.naturalWidth,G=F.height,W=F.width;if(m&&S&&G&&W){var $=Math.min(1,W/S,G/m),fe=Math.ceil($*S),ve=Math.ceil($*m);return fe+"px "+ve+"px"}}}function ce(f){if(y==="center"||y==="repeat"||c){var m=f.nativeEvent.layout;c&&c(f),ee(m)}}var x=A(D);return l.useEffect(()=>{f(),x!=null&&(L(Q),h&&h(),b.current=v.load(x,function(S){L(O),o&&o(S),s&&s()},function(){L(pe),g&&g({nativeEvent:{error:"Failed to load resource "+x}}),s&&s()}));function f(){b.current!=null&&(v.abort(b.current),b.current=null)}return f},[x,b,L,g,o,s,h]),l.createElement(H,ye({},K,{"aria-label":_,onLayout:ce,pointerEvents:Z,ref:t,style:[E.root,te&&E.inline,le,T,E.undo,{boxShadow:null}]}),l.createElement(H,{style:[E.image,Ce[y],{backgroundImage:ue,filter:ne},V!=null&&{backgroundSize:V}],suppressHydrationWarning:!0}),se,ke(oe,B.current))});Y.displayName="Image";var P=Y;P.getSize=function(e,t,r){v.getSize(e,t,r)};P.prefetch=function(e){return v.prefetch(e)};P.queryCache=function(e){return v.queryCache(e)};var E=w.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:k(k({},w.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:k(k({},w.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),Ce=w.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});export{P as I};
